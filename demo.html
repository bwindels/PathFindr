<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <canvas id="map"></canvas>
        <p id="time"></p>
        <script src="path.js"></script>
        <script src="graph.js"></script>
        <script src="squaregrid.js"></script>
        
        <script>
            (function() {
                var options = {
                    pixelsPerTile: 20,
                    borderWidth: 1,
                    debug: false
                };
                var obstacles = [
                    {x: 4, y: 0, height: 5},
                    {x: 1, y: 5, width: 4},
                    {x: 0, y: 7, width: 19, height: 2},
                    {x: 8, y: 2, height: 5},
                    {x: 12, y: 0, height: 5},
                    {x: 16, y: 2, height: 5},
                    {x: 12, y: 8, height: 5},
                    {x: 8, y: 9, height: 11},
                    {x: 8, y: 18, width: 11},
                    {x: 8, y: 18, width: 11}
                ];
                
                var canvas = document.getElementById('map');
                var grid = new PathFindr.SquareGrid(25, 25);
                obstacles.forEach(function(o) {
                    grid.addObstacle(o);
                });
                var startNode = grid.node(1, 2);
                var endNode = grid.node(1, 10);
                var path;
                var start = new Date().getTime();
                for(var i = 0; i < 100; ++i) {
                    path = new PathFindr.Path(startNode, endNode, options);
                    path.nodes();
                }
                var time = (new Date().getTime() - start)/100;
                document.getElementById('time').innerText = time+"ms";
                PathFindr.drawMap(grid, path, canvas, options);
            })();
        </script>
    </body>
</html>